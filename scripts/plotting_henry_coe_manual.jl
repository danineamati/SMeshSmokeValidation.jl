using LazySets
using Plots
using Images

using SMeshSmokeValidation

# Test that we can call objects from SMeshSmokeValidation
println("SMeshSmokeValidation loaded successfully")

background_img_path = "data/HenryCoeBackground.png"
background_img = load(background_img_path)
# [629100, 629500], [4116600, 4116900]
p = plot(
    [628320, 629660], [4116580, 4117420], 
    background_img[end:-1:1, :], yflip = false
)

burn_poly_strs = [
    "[628641.6524630056, 4117405.6992086787] [628641.1005166238, 4117402.7435195777] [628689.3919623729, 4117393.808362967] [628704.650452323, 4117382.9446074264] [628714.2053689049, 4117338.7018257333] [628745.8140334156, 4117303.674428698] [628761.7691717977, 4117247.322691185] [628778.8711416618, 4117232.0483793025] [628826.4780043643, 4117253.862245157] [628864.4742022038, 4117265.541596488] [628902.7763788318, 4117257.250742393] [628931.5022726606, 4117236.606261038] [628933.4645385067, 4117224.4293534625] [628928.9723382487, 4117218.0772617212] [628928.9723381383, 4117218.0772689297] [628915.2162953631, 4117198.6259254366] [628913.0213375526, 4117176.4070010767] [628954.4004764371, 4117135.4406873323] [628958.5294910568, 4117114.6379041397] [628991.4018775669, 4117082.894282812] [629094.1334330318, 4117092.058134142] [629168.8550833744, 4117126.4014907563] [629235.918802481, 4117132.1739914604] [629317.7671417573, 4117167.5765269287] [629344.8978319828, 4117137.6430590437] [629316.6498457486, 4117116.342556925] [629298.3036771204, 4117070.5342119196] [629256.7231363875, 4117049.028817664] [629229.41766802, 4117090.341774126] [629206.3294969104, 4117105.1624797345] [629160.9106058265, 4117085.4956159433] [629138.7543235318, 4117039.628996864] [629094.9775655164, 4117037.0600447343] [629011.4077398273, 4117020.6022873316] [628994.6153031064, 4116997.581412032] [628916.061152762, 4117026.7281323816] [628871.3254031998, 4117086.74439635] [628813.5486969273, 4117127.591571928] [628728.9634290558, 4117177.5130739054] [628670.0275166795, 4117294.218352333] [628616.0912950813, 4117333.227638926] [628611.5282039568, 4117382.4762400985] [628641.7394868153, 4117400.0099862134] [628641.6524630056, 4117405.6992086787]",
    "[628612.4369631578, 4117385.3354199943] [628617.0580626935, 4117332.2939903615] [628671.0088017763, 4117292.3364890995] [628728.9634290558, 4117177.5130739054] [628872.2922275292, 4117085.8107476234] [628917.0279888855, 4117025.7944816924] [628995.582151537, 4116996.647766659] [629012.3745876651, 4117019.668646455] [629097.834470384, 4117037.103893878] [629140.6589264598, 4117039.658239448] [629161.8774638227, 4117084.5619989964] [629205.3917692897, 4117104.1996119847] [629230.3845334143, 4117089.4081652877] [629255.7562634913, 4117049.962428237] [629299.2559755691, 4117070.5488513187] [629319.4921461664, 4117117.334719846] [629344.8686670652, 4117139.5395298363] [629368.0067739814, 4116997.625251437] [629337.8436814939, 4117038.894195331] [629295.3836518382, 4117012.6326436396] [629251.737910424, 4117001.528622781] [629226.6137326761, 4117024.8544058534] [629199.1918161897, 4117073.7535158116] [629174.5922676731, 4117062.942550511] [629149.4771611814, 4117023.66964158] [629120.5671416981, 4116983.389907031] [629070.0948313248, 4116982.6152539533] [629053.5352544879, 4116944.4220688925] [629043.6417352399, 4116906.331018299] [628987.9349447542, 4116874.1765650264] [628928.556823638, 4116895.0813883576] [628863.8653896844, 4116951.9473763527] [628832.5490456712, 4117006.479157037] [628773.6745266889, 4117056.7948539606] [628707.2549283749, 4117102.252865011] [628655.250917578, 4117139.395521012] [628620.2144800706, 4117188.1791711673] [628569.2796317824, 4117217.750717566] [628538.816988724, 4117278.9338429784] [628534.1094192264, 4117337.664895838] [628613.418225325, 4117383.453571231] [628612.4369631578, 4117385.3354199943]",
    "[628460.0155357083, 4117293.3790766574] [628535.061685111, 4117337.679449507] [628538.80249673, 4117279.882060217] [628570.2464067029, 4117216.8170505795] [628620.2144800706, 4117188.1791711673] [628655.2364128765, 4117140.343754198] [628771.7554122731, 4117057.7139371536] [628833.5013499603, 4117006.4937435025] [628863.8653896844, 4116951.9473763527] [628928.5422888593, 4116896.0296496768] [628989.8541258601, 4116873.2575085135] [629043.6126396612, 4116908.227539001] [629069.1279727205, 4116983.5488927257] [629121.5048926681, 4116984.3527780627] [629173.6399687412, 4117062.9279252524] [629200.144113971, 4117073.768143999] [629227.5806049628, 4117023.9207891836] [629253.6425226636, 4117001.5578907216] [629297.2736851196, 4117013.6101708123] [629338.3198325684, 4117038.9015172073] [629367.9994816623, 4116998.099377035] [629368.1307433591, 4116989.5651121913] [629404.4456869619, 4116919.9361741873] [629372.8858527135, 4116897.161290563] [629325.2699390154, 4116896.429062202] [629314.3643771337, 4116924.2417026837] [629327.5241377885, 4116966.651437642] [629327.2616979606, 4116983.720002648] [629290.2455670268, 4116975.0888816137] [629247.4936496724, 4116967.792497619] [629216.6118415641, 4116993.8753627636] [629204.4239642712, 4117012.1833756464] [629179.6203503485, 4117014.64781688] [629150.5793973127, 4116982.9022054607] [629141.9182866935, 4116957.6345772967] [629093.3577164812, 4116956.414904096] [629083.3552495089, 4116925.4357936317] [629052.8963718221, 4116861.894153679] [629002.2889415247, 4116838.828357783] [628966.6858420626, 4116831.168729773] [628895.8835194967, 4116882.724583087] [628824.7075821267, 4116927.6355905714] [628788.419350082, 4116995.844389732] [628713.559098607, 4117032.6372688785] [628630.9288817705, 4117079.270637976] [628585.3084400692, 4117135.006340684] [628490.7581175487, 4117245.004062783] [628460.0155357083, 4117293.3790766574]",
    "[628459.5321588217, 4117293.8459118307] [628414.2285522718, 4117266.597803524] [628481.7026314591, 4117151.9178765467] [628629.7807669407, 4116998.633455582] [628776.9728476643, 4116965.7922136956] [628776.7173916018, 4116920.261367176] [628801.9276887326, 4116891.244426164] [628834.2919516343, 4116892.6885581487] [628948.3516499378, 4116784.411441112] [629021.3541440571, 4116744.7453899803] [629055.4054081547, 4116760.4437541626] [629073.6517678506, 4116812.891058685] [629103.4421758616, 4116857.9273552545] [629108.7049009886, 4116887.4112537215] [629120.7648005044, 4116908.463043557] [629155.8548982702, 4116918.4866107893] [629180.4403353808, 4116930.2459448073] [629193.9329437461, 4116920.019866672] [629224.3924617162, 4116921.4362475113] [629249.1089418493, 4116924.661455132] [629241.8109663908, 4116903.6826679497] [629245.0613194973, 4116878.1234706314] [629288.5716088578, 4116836.1100533186] [629347.6157588613, 4116837.0177876297] [629396.1259880906, 4116841.5578590264] [629435.8463800862, 4116860.190330909] [629455.5386797851, 4116880.4116744045] [629457.2681882131, 4116891.8201552588] [629447.4969102244, 4116907.794053559] [629403.529842145, 4116917.550872958] [629374.2997451288, 4116898.131523999] [629326.7129960529, 4116895.5027626674] [629315.8001389913, 4116923.789534236] [629328.4764480869, 4116966.6660800343] [629328.2285864338, 4116982.786392348] [629249.4055551133, 4116967.3476372836] [629216.619125342, 4116993.40123716] [629206.8192927021, 4117011.2716981634] [629180.1110660573, 4117013.7068809504] [629150.1178033756, 4116981.9466420272] [629141.8964481554, 4116959.0569597026] [629094.310027231, 4116956.429519942] [629054.771916653, 4116863.819906439] [629002.7723749073, 4116838.3615264054] [628967.6090886239, 4116833.079867942] [628827.10288855, 4116926.7237966466] [628787.9214185583, 4116997.259473459] [628632.3718268644, 4117078.344243856] [628490.7581175487, 4117245.004062783] [628461.4367000669, 4117293.875002123] [628459.5321588217, 4117293.8459118307]",
    "[629024.2111475548, 4116744.7892114585] [629024.2031692548, 4116745.309362264] [629034.0309018402, 4116745.460110067] [629053.7671137361, 4116734.796310209] [629074.2154978176, 4116730.3803063994] [629074.4343523047, 4116716.1173734707] [629070.3477847637, 4116708.1641794313] [629070.3477847637, 4116708.1641794313] [629065.813260551, 4116699.3392023537] [629065.5806504567, 4116700.0137166986] [629069.1821600149, 4116701.073830861] [629069.1821600167, 4116701.0738308937] [629071.1050838064, 4116701.6398494695] [629071.1050838064, 4116701.6398494695] [629078.9917400457, 4116708.4192212983] [629085.8715620246, 4116722.9512340734] [629091.4550847653, 4116764.0967914374] [629102.4665135274, 4116798.667304743] [629119.6760975098, 4116832.704428529] [629119.6760974561, 4116832.70443203] [629120.5618617006, 4116834.456302281] [629130.7195009199, 4116866.7943057893] [629135.0213762315, 4116875.7381620673] [629145.6388268837, 4116878.1206242917] [629146.096319512, 4116877.635443524] [629170.8968538124, 4116869.396329323] [629207.4928969535, 4116843.400668968] [629227.0783982992, 4116808.607269143] [629245.3183305121, 4116799.4025429906] [629290.2818476671, 4116786.814557304] [629306.6172377153, 4116777.580660596] [629340.7262066297, 4116789.487049371] [629381.7785137506, 4116783.478886982] [629414.2744889075, 4116776.390773448] [629436.911583251, 4116790.9665724756] [629456.5201887544, 4116878.5298016346] [629436.784110791, 4116861.1532519865] [629398.0306374349, 4116841.5871586953] [629289.5239338197, 4116836.1246909043] [629245.0904603202, 4116876.2269419897] [629241.7818261406, 4116905.579190432] [629250.0612566646, 4116924.676088518] [629193.9329437461, 4116920.019866672] [629182.3303998334, 4116931.223454312] [629155.8548982702, 4116918.4866107893] [629123.6071924784, 4116909.4551606905] [629110.5804276417, 4116889.337013906] [629104.3799432998, 4116858.890237938] [629075.5127684174, 4116815.7650976568] [629055.3908594818, 4116761.392030909] [629027.9913944906, 4116746.744198314] [629024.2111475548, 4116744.7892114585]",
    "[629148.4008384679, 4116876.6388039812] [629172.3398972515, 4116868.4700008836] [629207.0094519997, 4116843.867488773] [629227.0856823862, 4116808.1331331627] [629290.7653005851, 4116786.347738814] [629307.5695693616, 4116777.595300048] [629340.7262066297, 4116789.487049371] [629416.6480244526, 4116776.901540779] [629402.5162160206, 4116766.724870973] [629394.2202699301, 4116717.749285957] [629462.82873393, 4116654.3061792133] [629479.9764632458, 4116623.2690634] [629482.4230211144, 4116619.038388702] [629441.8897744301, 4116622.20866068] [629400.4573621883, 4116652.8722511414] [629359.9170341102, 4116656.5170417507] [629336.0523964579, 4116690.7707589017] [629325.0494425234, 4116693.921375972] [629315.0863046349, 4116691.3969360855] [629291.1586857946, 4116667.790627879] [629278.7417795872, 4116669.971071201] [629268.5090109757, 4116684.9899876066] [629260.71071976, 4116727.5529861753] [629249.6641342165, 4116733.5485265316] [629242.5507501962, 4116731.5422224784] [629202.8803275428, 4116709.5914344657] [629188.170044936, 4116706.045731196] [629177.0943630025, 4116713.9379459117] [629173.5937167597, 4116724.792000806] [629171.5244936823, 4116766.494332075] [629160.9789771822, 4116801.9010779634] [629161.6546500428, 4116819.932859043] [629157.2265261981, 4116860.1757663907] [629152.3047578506, 4116870.5335731185] [629146.9577991994, 4116877.5651354627] [629148.4008384679, 4116876.6388039812]"
]

burn_polys = [
    parse_coord_str_to_poly(s)
    for s in burn_poly_strs
]

for (poly_ind, burn_poly) in enumerate(burn_polys)
    plot!(burn_poly, color=:red)
end
# burn6_poly_split = [split(s, ',') for s in split(burn6_poly_str[2:end-1], "] [")]

display(p)
